{"ast":null,"code":"var _jsxFileName = \"C:\\\\mars_power_drive\\\\frontend\\\\src\\\\components\\\\ShootingModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport '../css/ShootingModal.css'; // וודא שהנתיב לקובץ ה-CSS נכון\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ShootingModal = ({\n  isOpen,\n  onClose,\n  drills,\n  onSave,\n  isReadOnly\n}) => {\n  _s();\n  const [text, setText] = useState(drills);\n\n  // עדכון הטקסט כאשר נפתחים נתונים חדשים\n  useEffect(() => {\n    setText(drills);\n  }, [drills]);\n\n  // --- לוגיקת חישוב הזריקות ---\n  const calculateTotalAndSave = () => {\n    // פיצול הטקסט לשורות כדי לבדוק שורה-שורה\n    const lines = text.split('\\n');\n    let totalShots = 0;\n    lines.forEach(line => {\n      // 1. תנאי התעלמות: אם השורה מכילה \"לא עוזבים את המגרש\" או \"ברצף\" - מדלגים\n      if (line.includes('לא עוזבים את המגרש') || line.includes('רצופות') || line.includes('ברצף')) {\n        return;\n      }\n\n      // 2. חיפוש מספרים: מחפש מספר שמופיע לפני המילה \"זריקות\"\n      // דוגמה: בשורה \"70 זריקות יד אחת\" הוא ימצא את ה-70\n      const match = line.match(/(\\d+)\\s+זריקות/);\n      if (match) {\n        // match[1] הוא המספר שנמצא. ממירים אותו למספר ומוסיפים לסכום\n        totalShots += parseInt(match[1], 10);\n      }\n    });\n    const newSummary = `${totalShots} זריקות`;\n\n    // שליחת שני פרמטרים לאבא: \n    // 1. הטקסט המלא (לשמירה ב-DB)\n    // 2. הכותרת המחושבת (להצגה בכרטיס)\n    onSave(text, newSummary);\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"shooting-modal-overlay\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shooting-modal-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        className: \"btn-close-modal\",\n        children: \"\\u2716 \\u05E1\\u05D2\\u05D5\\u05E8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83C\\uDFC0 \\u05D0\\u05D9\\u05DE\\u05D5\\u05DF \\u05E7\\u05DC\\u05D9\\u05E2\\u05D4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shooting-modal-body\",\n      children: isReadOnly ?\n      /*#__PURE__*/\n      // מצב קריאה לשחקן\n      _jsxDEV(\"div\", {\n        className: \"readonly-content\",\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 15\n      }, this) :\n      /*#__PURE__*/\n      // מצב עריכה למאמן\n      _jsxDEV(\"textarea\", {\n        className: \"shooting-textarea\",\n        value: text,\n        onChange: e => setText(e.target.value),\n        placeholder: \"\\u05E4\\u05E8\\u05D8 \\u05DB\\u05D0\\u05DF \\u05D0\\u05EA \\u05E1\\u05D3\\u05E8 \\u05D4\\u05EA\\u05E8\\u05D2\\u05D9\\u05DC\\u05D9\\u05DD...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), !isReadOnly && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shooting-modal-footer\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: calculateTotalAndSave,\n        className: \"btn-save-shooting\",\n        children: \"\\uD83D\\uDCBE \\u05E9\\u05DE\\u05D5\\u05E8 \\u05D5\\u05E2\\u05D3\\u05DB\\u05DF \\u05E1\\u05D9\\u05DB\\u05D5\\u05DD \\u05D6\\u05E8\\u05D9\\u05E7\\u05D5\\u05EA\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n_s(ShootingModal, \"meOwaxOyK8s95bcs0vqEbxsRCa0=\");\n_c = ShootingModal;\nexport default ShootingModal;\nvar _c;\n$RefreshReg$(_c, \"ShootingModal\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","ShootingModal","isOpen","onClose","drills","onSave","isReadOnly","_s","text","setText","calculateTotalAndSave","lines","split","totalShots","forEach","line","includes","match","parseInt","newSummary","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","placeholder","_c","$RefreshReg$"],"sources":["C:/mars_power_drive/frontend/src/components/ShootingModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../css/ShootingModal.css'; // וודא שהנתיב לקובץ ה-CSS נכון\r\n\r\nconst ShootingModal = ({ isOpen, onClose, drills, onSave, isReadOnly }) => {\r\n  const [text, setText] = useState(drills);\r\n\r\n  // עדכון הטקסט כאשר נפתחים נתונים חדשים\r\n  useEffect(() => {\r\n    setText(drills);\r\n  }, [drills]);\r\n\r\n  // --- לוגיקת חישוב הזריקות ---\r\n  const calculateTotalAndSave = () => {\r\n    // פיצול הטקסט לשורות כדי לבדוק שורה-שורה\r\n    const lines = text.split('\\n');\r\n    let totalShots = 0;\r\n\r\n    lines.forEach(line => {\r\n      // 1. תנאי התעלמות: אם השורה מכילה \"לא עוזבים את המגרש\" או \"ברצף\" - מדלגים\r\n      if (line.includes('לא עוזבים את המגרש') || line.includes('רצופות') || line.includes('ברצף')) {\r\n        return; \r\n      }\r\n\r\n      // 2. חיפוש מספרים: מחפש מספר שמופיע לפני המילה \"זריקות\"\r\n      // דוגמה: בשורה \"70 זריקות יד אחת\" הוא ימצא את ה-70\r\n      const match = line.match(/(\\d+)\\s+זריקות/);\r\n      \r\n      if (match) {\r\n        // match[1] הוא המספר שנמצא. ממירים אותו למספר ומוסיפים לסכום\r\n        totalShots += parseInt(match[1], 10);\r\n      }\r\n    });\r\n\r\n    const newSummary = `${totalShots} זריקות`; \r\n\r\n    // שליחת שני פרמטרים לאבא: \r\n    // 1. הטקסט המלא (לשמירה ב-DB)\r\n    // 2. הכותרת המחושבת (להצגה בכרטיס)\r\n    onSave(text, newSummary); \r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"shooting-modal-overlay\">\r\n      \r\n      {/* כותרת */}\r\n      <div className=\"shooting-modal-header\">\r\n          <button onClick={onClose} className=\"btn-close-modal\">✖ סגור</button>\r\n          <h2>🏀 אימון קליעה</h2>\r\n      </div>\r\n\r\n      {/* גוף החלון */}\r\n      <div className=\"shooting-modal-body\">\r\n          {isReadOnly ? (\r\n              // מצב קריאה לשחקן\r\n              <div className=\"readonly-content\">{text}</div>\r\n          ) : (\r\n              // מצב עריכה למאמן\r\n              <textarea \r\n                  className=\"shooting-textarea\"\r\n                  value={text}\r\n                  onChange={(e) => setText(e.target.value)}\r\n                  placeholder=\"פרט כאן את סדר התרגילים...\"\r\n              />\r\n          )}\r\n      </div>\r\n\r\n      {/* כפתור שמירה (רק למאמן) */}\r\n      {!isReadOnly && (\r\n          <div className=\"shooting-modal-footer\">\r\n              <button onClick={calculateTotalAndSave} className=\"btn-save-shooting\">\r\n                💾 שמור ועדכן סיכום זריקות\r\n              </button>\r\n          </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShootingModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}